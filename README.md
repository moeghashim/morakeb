<div dir="rtl" align="center">
  <strong>ูุฑุงูุจ</strong> ูู ุฃุฏุงุฉ ูุฑุงูุจุฉ ุชุบููุฑุงุช ุงููุญุชูู ุงููุณุชุถุงูุฉ ุฐุงุชููุง ูุน ูุงุฌูุฉ ุทุฑููุฉ.<br />
  ุชุชุจุน ุงูุตูุญุงุช ูุงูุฎูุงุตุงุช ููุงุฌูุงุช ุจุฑูุฌุฉ ุงูุชุทุจููุงุชุ ุงุญุตู ุนูู ูุฑููุงุช ูุงุจูุฉ ูููุฑุงุกุฉ ูููุฎุตุงุช ุฐููุฉ ุงุฎุชูุงุฑูุฉ.

  <br /><br />
  <em>
    ุตูุญุงุช ุงูููุจ โข Markdown โข JSON โข XML/Atom
    <br />
    ูุฑููุงุช ูุงุจูุฉ ูููุฑุงุกุฉ โข ููุฎุตุงุช ุฐููุฉ โข ุฅุดุนุงุฑุงุช
  </em>
</div>

<div align="center">
  <strong>Morakeb</strong> is a selfโhosted content change monitor with a TUI.<br />
  Track pages, feeds, and APIs; get readable diffs and optional AI summaries.

  <br /><br />
  <em>
    Webpages โข Markdown โข JSON โข XML/Atom
    <br />
    Readable diffs โข AI summaries โข Notifications
  </em>
</div>

---

## ุญุงูุฉ ุงููุดุฑูุน / Project Status

<div dir="rtl">

**ุงูุฅุตุฏุงุฑ ุงูุญุงูู:** 0.1.0  
**ุงููุณุชูุฏุน:** [https://github.com/moeghashim/morakeb](https://github.com/moeghashim/morakeb)  
**ุงููุดุฑ ุนูู Cloudflare:** [https://morakeb.moe-3b7.workers.dev](https://morakeb.moe-3b7.workers.dev)

### โ ุงูููุฒุงุช ุงูููุฌุฒุฉ

- **ุงููุฑุงูุจุฉ:** ุตูุญุงุช ุงูููุจุ ูุงุฌูุงุช ุจุฑูุฌุฉ ุงูุชุทุจููุงุช (JSON)ุ Markdownุ ุฎูุงุตุงุช XML/Atom
- **ุงูููุฎุตุงุช ุงูุฐููุฉ:** 
  - **ุงููููุฐุฌ ุงูุงูุชุฑุงุถู:** Gemini Flash (Google) - ูุง ูุชุทูุจ ููุงุชูุญ API ุนูุฏ ุงูุงุณุชุถุงูุฉ ุนูู Cloudflare
  - ุฏุนู ููุฏูู ุฎุฏูุงุช ุขุฎุฑูู: Anthropic Claudeุ OpenAIุ Google Gemini
  - ููุฎุตุงุช ุดุงููุฉ ููุชุบููุฑุงุช ุจุงููุบุฉ ุงูุนุฑุจูุฉ
  - ุชุถููู ุฌููุน ุนูุงุตุฑ ุณุฌู ุงูุชุบููุฑุงุช (ุจุฏูู ุงูุชุทุงุน)
  - ุนุฑุถ ุฃุฑูุงู ุงูุฅุตุฏุงุฑุงุช ุจุดูู ุตุญูุญ ูู ุงููุต ุงูุนุฑุจู
- **ุงูุฅุดุนุงุฑุงุช:** 
  - Telegram (ููุชูู)
  - Instagram (ุชูููุฐ ุฃุณุงุณู)
- **ูุงุฌูุฉ ุทุฑููุฉ:** ูุงุฌูุฉ ุทุฑููุฉ ูุงููุฉ ูุฅุฏุงุฑุฉ ุงููุฑุงูุจุงุช ูุงูุฅุนุฏุงุฏุงุช
- **ูุงุนุฏุฉ ุงูุจูุงูุงุช:** SQLite ูุน Drizzle ORMุ ุฏุนู ุงูุชุฑุญููุงุช
- **ุงูููุงู ุงูุฎูููุฉ:** ูุญูุตุงุช ูุชูุงุฒูุฉ ูุน ููู ุงูููุงู
- **ุงูุงุญุชูุงุธ:** ูุงุจู ููุชูููู ููุตูุฑ ุงูููุฑูุฉ ูุงูุชุบููุฑุงุช

### ๐ง ููุฏ ุงูุชุทููุฑ / ูุฎุทุท

- **Cloudflare Workers:** ุงูุจููุฉ ุงูุฃุณุงุณูุฉ ููุดูุฑุฉุ ูุญุชุงุฌ ุฅุนุงุฏุฉ ููููุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุชูุงูู D1
- **ูุธุงู ุงูุทูุงุจูุฑ:** ุชูุงูู Cloudflare Queues (ูุชุทูุจ ุฎุทุฉ ูุฏููุนุฉ)
- **ูุดุบูุงุช Cron:** ูุญูุตุงุช ูุฌุฏููุฉ ูููุฑุงูุจุงุช (ุงูุจููุฉ ุฌุงูุฒุฉ)

</div>

**Current Version:** 0.1.0  
**Repository:** [https://github.com/moeghashim/morakeb](https://github.com/moeghashim/morakeb)  
**Cloudflare Deployment:** [https://morakeb.moe-3b7.workers.dev](https://morakeb.moe-3b7.workers.dev) (Placeholder - DB refactoring pending)

### โ Implemented Features

- **Monitoring:** Webpages, APIs (JSON), Markdown, XML/Atom feeds
- **AI Summaries:** 
  - **Default Model:** Gemini Flash (Google) - No API keys required when hosted on Cloudflare
  - Other providers supported: Anthropic Claude, OpenAI, Google Gemini
  - Comprehensive changelog summarization in Arabic
  - All changelog items included (no truncation)
  - LTR version numbers in RTL Arabic text
- **Notifications:** 
  - Telegram (fully implemented)
  - Instagram (basic implementation)
- **TUI:** Full-featured terminal UI for managing monitors and settings
- **Database:** SQLite with Drizzle ORM, migrations supported
- **Background Jobs:** Parallel monitor checks with job locking
- **Retention:** Configurable snapshot and change retention

### ๐ง In Progress / Planned

- **Cloudflare Workers:** Basic structure deployed, DB refactoring needed for D1 compatibility
- **Queue System:** Cloudflare Queues integration (requires paid plan)
- **Cron Triggers:** Scheduled monitor checks (structure ready)

---

## ุงูุจุฏุก ุงูุณุฑูุน / Quick Start

<div dir="rtl">

ุงููุชุทูุจุงุช: Bun 1.3+ุ SQLite (ูุถูู ูุน Bun)ุ shell.

ุงุณุชูุณุงุฎ ูุชุซุจูุช:
```bash
git clone https://github.com/moeghashim/morakeb.git
cd morakeb
bun install
```

ุฅุนุฏุงุฏ ุงูุจูุฆุฉ ููุงุนุฏุฉ ุงูุจูุงูุงุช:
```bash
bun setup:local
```

ุชุดุบูู ุงูุฎุฏูุฉ ูุงููุงุฌูุฉ ุงูุทุฑููุฉ (ุงูุชุทููุฑ ุงููุญูู):
```bash
bun dev
```

ูู ุทุฑููุฉ ุฃุฎุฑู:
```bash
bun morakeb
```

</div>

Requirements: Bun 1.3+, SQLite (bundled with Bun), a shell.

Clone and install:
```bash
git clone https://github.com/moeghashim/morakeb.git
cd morakeb
bun install
```

Setup env and database:
```bash
bun setup:local
```

Run the service and TUI (local dev):
```bash
bun dev
```

In another terminal:
```bash
bun morakeb
```

---

## ุงูููุฒุงุช / Features

<div dir="rtl">

### ุงููุฑุงูุจุฉ
- ุงููุฑุงูุจุงุช: ุตูุญุงุช ุงูููุจุ ูุงุฌูุงุช ุจุฑูุฌุฉ ุงูุชุทุจููุงุช (JSON)ุ Markdownุ ุฎูุงุตุงุช XML/Atom
- ุชุญููู HTMLโMarkdown ูููุฑู ุงููุณุชูุฑ
- ูุธุงู ุงูููููุงุช ุงูุฅุถุงููุฉ ููุฎูุงุตุงุช ุงููุชุฎุตุตุฉ (ุฅุตุฏุงุฑุงุช GitHubุ ุฎูุงุตุงุช Atom)
- ุงูุญุฏ ุงูุฃูุตู ูุญุฌู ุงูุฌูุจ: 5 ููุฌุงุจุงูุช (ูุชู ุชุฎุทู ุงูุตูุญุงุช ุงููุจูุฑุฉ)

### ุงูููุฎุตุงุช ุงูุฐููุฉ
- **ุงููููุฐุฌ ุงูุงูุชุฑุงุถู:** Gemini Flash (Google) - ุณุฑูุน ูุงูุชุตุงุฏู
- **ููุฏููู ุขุฎุฑูู:** Anthropic Claudeุ OpenAIุ Google Gemini
- ุงูุชูููู ุนุจุฑ ุงููุงุฌูุฉ ุงูุทุฑููุฉ โ ุงูุฅุนุฏุงุฏุงุช (ุงููุฒูุฏ/ุงููููุฐุฌุ ุงูุชุญูู ูู ุงูููุงุชูุญ)
- **ุงูุชุญุณููุงุช ุงูุฃุฎูุฑุฉ:**
  - ุชุถููู ุฌููุน ุนูุงุตุฑ ุณุฌู ุงูุชุบููุฑุงุช (ุจุฏูู ุญุฏ 5 ุนูุงุตุฑ)
  - ุนุฑุถ ุฃุฑูุงู ุงูุฅุตุฏุงุฑุงุช ุจุดูู ุตุญูุญ ูู ุชูุณูู LTR ุฏุงุฎู ุงููุต ุงูุนุฑุจู RTL
  - ููุฎุตุงุช ุนุฑุจูุฉ ุฌุฐุงุจุฉ ูุน ููุงุท ูุฎุชุตุฑุฉ ูููุฌูุฉ ููุนูู
  - ุชุตููุฉ ุงููุงุฏูุฉ ููุชุฑููุฒ ุนูู ุงูุชุบููุฑุงุช ุงูููุฌูุฉ ูููุณุชุฎุฏู

### ุงูุฅุดุนุงุฑุงุช
- **Telegram:** ููุชูู ุงูุชูููุฐ ูุน ุชูุณูู HTML
- **Instagram:** ุชูููุฐ ุฃุณุงุณู (ูููุฏ ูุงูุฐุฉ ุงูุฑุณุงุฆู 24 ุณุงุนุฉ)
- ุฅุฏุงุฑุฉ ุงููููุงุช ุนุจุฑ ุงููุงุฌูุฉ ุงูุทุฑููุฉ
- ุฏุนู ุงูุฅุดุนุงุฑุงุช ุงูููุฑูุฉ ูุงูููุฎุตุงุช ุงูุฃุณุจูุนูุฉ

### ูุธุฑุฉ ุนุงูุฉ ุนูู ุงููุงุฌูุฉ ุงูุทุฑููุฉ

ุงุจุฏุฃ:
```bash
bun morakeb
```

ุงูุชููู:
- **ุงููุฑุงูุจุงุช:** ุฅุถุงูุฉ โ ูุงุฆูุฉ โ ุชูุงุตูู โ ุฑุจุท ููุงุฉ ุฅุดุนุงุฑ
- **ุงูุฅุนุฏุงุฏุงุช:** ุงุฎุชุฑ ูุฒูุฏ/ูููุฐุฌ ุงูุฐูุงุก ุงูุงุตุทูุงุนูุ ุชุญูู ูู ุงูููุงุชูุญุ ุชูุนูู/ุชุนุทูู ุงูููุฎุตุงุช
- **ุงูุชุญูู:** โ/โ ููุชูููุ Enter ููุชุญุฏูุฏุ ESC/โ ููุฑุฌูุนุ q ููุฎุฑูุฌ

</div>

### Monitoring
- Monitors: webpages, APIs (JSON), Markdown, XML/Atom feeds
- HTMLโMarkdown conversion for stable diffing
- Plugin system for specialized feeds (GitHub releases, Atom feeds)
- 5 MB max fetch size (oversize pages are skipped)

### AI Summaries
- **Default Model:** Gemini Flash (Google) - Fast and cost-effective
- **Other Providers:** Anthropic Claude, OpenAI, Google Gemini
- Configure in TUI โ Settings (provider/model, verify keys)
- **Recent Improvements:**
  - All changelog items are included (no 5-item limit)
  - Version numbers display correctly in LTR format within RTL Arabic text
  - Engaging Arabic summaries with concise, action-oriented bullets
  - Materiality filtering to focus on user-facing changes

### Notifications
- **Telegram:** Fully implemented with HTML formatting
- **Instagram:** Basic implementation (24-hour messaging window limitation)
- Channel management via TUI
- Support for immediate and weekly digest notifications

### TUI Overview

Start:
```bash
bun morakeb
```

Navigation:
- **Monitors:** Add โ List โ Detail โ Link notification channel
- **Settings:** Choose AI provider/model, verify keys, enable/disable summaries
- **Controls:** โ/โ to navigate, Enter to select, ESC/โ to go back, q to quit

---

## ุงูุชุทููุฑ ุงููุญูู / Local Development

<div dir="rtl">

```bash
bun dev          # ุจุฏุก ุฎุงุฏู ุงูุชุทููุฑ ูุน ูุถุน ุงููุฑุงูุจุฉ
bun typecheck    # ูุญุต ุฃููุงุน TypeScript
bun test         # ุชุดุบูู ูุฌููุนุฉ ุงูุงุฎุชุจุงุฑุงุช
bun build        # ุจูุงุก ููุฅูุชุงุฌ
```

</div>

```bash
bun dev          # Start dev server with watch mode
bun typecheck    # Type check TypeScript
bun test         # Run test suite
bun build        # Build for production
```

---

## ุฎูุงุฑุงุช ุงููุดุฑ / Deployment Options

<div dir="rtl">

### ุงููุดุฑ ุนูู VPS

ุฅูุดุงุก ููุดุฑ ูู ุฎุทูุฉ ูุงุญุฏุฉ:
```bash
bun setup:vps
```

ูุดูู ุงููุทุงูุจุงุช:
- ููุชุงุญ API ูู Hetzner
- ุงุณู ุงูุฎุงุฏูุ ุงูููุทูุฉุ ุงูุญุฌู
- ูุณุงุฑ ุงูุชุซุจูุช
- ููุชุงุญ SSH
- ุงููุดุฑ ุงูุชููุงุฆู ุนูู GitHub (ุงุฎุชูุงุฑู)

ุจุนุฏ ุงููุดุฑ:
```bash
bun morakeb --remote
```

### Cloudflare Workers

**ุงูุญุงูุฉ:** ุงูุจููุฉ ุงูุฃุณุงุณูุฉ ููุดูุฑุฉุ ุฅุนุงุฏุฉ ููููุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุนููุฉ

ูุชุถูู ุงููุดุฑูุน ุฏุนู Cloudflare Workers:
- ููุทุฉ ุฏุฎูู Worker: `src/cloudflare/index.ts`
- ุงูุชูููู: `wrangler.toml`
- ุฑุจุท ูุงุนุฏุฉ ุจูุงูุงุช D1 ูููููู
- ูุดุบูุงุช Cron ููููููุฉ (ูููููุง ูู ููุชุตู ุงูููู UTC)

**ุงููููุฏ ุงูุญุงููุฉ:** ูุฆุฉ DB ุชุณุชุฎุฏู ุทุฑู Bun SQLite ุงููุชุฒุงููุฉ ูุชุญุชุงุฌ ุฅุนุงุฏุฉ ููููุฉ ูุนูููุงุช D1 ุบูุฑ ุงููุชุฒุงููุฉ.

**ุงููุดุฑ:**
```bash
wrangler deploy
```

**GitHub Actions:** ุณูุฑ ุนูู ุงููุดุฑ ุงูุชููุงุฆู ูููููู (`.github/workflows/deploy-cloudflare.yml`). ูุชุทูุจ ุฃุณุฑุงุฑ GitHub:
- `CLOUDFLARE_API_TOKEN`
- `CLOUDFLARE_ACCOUNT_ID`

**ุงููููุฐุฌ ุงูุงูุชุฑุงุถู:** ุนูุฏ ุงูุงุณุชุถุงูุฉ ุนูู Cloudflareุ ูุณุชุฎุฏู ุงููุดุฑูุน Gemini Flash ุงูุชุฑุงุถููุง - ูุง ุญุงุฌุฉ ูููุงุชูุญ API.

</div>

### VPS Deployment

Create and deploy in one flow:
```bash
bun setup:vps
```

Prompts include:
- Hetzner API key
- Server name, region, size
- Install path
- SSH key
- GitHub autoโdeploy (optional)

After deployment:
```bash
bun morakeb --remote
```

### Cloudflare Workers

**Status:** Basic structure deployed, DB refactoring pending

The project includes Cloudflare Workers support:
- Worker entry point: `src/cloudflare/index.ts`
- Configuration: `wrangler.toml`
- D1 database binding configured
- Cron triggers configured (daily at midnight UTC)

**Current Limitation:** The DB class uses synchronous Bun SQLite methods and needs refactoring for async D1 operations.

**Deployment:**
```bash
wrangler deploy
```

**GitHub Actions:** Auto-deploy workflow configured (`.github/workflows/deploy-cloudflare.yml`). Requires GitHub secrets:
- `CLOUDFLARE_API_TOKEN`
- `CLOUDFLARE_ACCOUNT_ID`

**Default Model:** When hosted on Cloudflare, the project uses Gemini Flash by default - no API keys required.

---

## ุงูุจูุงูุงุช ูุงููุณุฎ ุงูุงุญุชูุงุทู / Data & Backups

<div dir="rtl">

- SQLite ูู `data/changes.db` (ูุถุน WAL)
- ุงููุณุฎ ุงูุงุญุชูุงุทู ูุน ูููุงุช `-wal` ู `-shm` ุงูุฌุงูุจูุฉ ุฅุฐุง ูุงู ูุนูู ูุจุงุดุฑุฉ
- ุชุฑุญููุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ุนุจุฑ Drizzle Kit

</div>

- SQLite at `data/changes.db` (WAL mode)
- Back up with `-wal` and `-shm` side files if running live
- Database migrations via Drizzle Kit

---

## ุงูุชุญุฏูุซุงุช ุงูุฃุฎูุฑุฉ / Recent Updates

<div dir="rtl">

- **ููุฎุตุงุช ุณุฌู ุงูุชุบููุฑุงุช:** ุชุญุณูู ูุชุถููู ุฌููุน ุงูุนูุงุตุฑ ูู ุณุฌูุงุช ุงูุชุบููุฑุงุชุ ูููุณ ููุท ุฃูุถู 5
- **ุนุฑุถ ุงูุฅุตุฏุงุฑ:** ุฃุฑูุงู ุงูุฅุตุฏุงุฑุงุช ุชุนุฑุถ ุงูุขู ุจุดูู ุตุญูุญ ูู ุชูุณูู LTR ุฏุงุฎู ุงููุต ุงูุนุฑุจู RTL
- **ุงูููุฎุตุงุช ุงูุนุฑุจูุฉ:** ููุท ูุญุณูู ูุน ููุงุท ุฌุฐุงุจุฉ ููุฎุชุตุฑุฉ (5-10 ูููุงุช)
- **ูููุงุช ุงูุฅุดุนุงุฑุงุช:** ุฅุถุงูุฉ ุฏุนู Instagram (ุชูููุฐ ุฃุณุงุณู)
- **ุงููููุฐุฌ ุงูุงูุชุฑุงุถู:** Gemini Flash (Google) - ุณุฑูุน ูุงูุชุตุงุฏู

</div>

- **Changelog Summarization:** Improved to include all items from changelogs, not just top 5
- **Version Display:** Version numbers now display correctly in LTR format within RTL Arabic text
- **Arabic Summaries:** Enhanced style with engaging, concise bullets (5-10 words)
- **Notification Channels:** Added Instagram support (basic implementation)
- **Default Model:** Gemini Flash (Google) - Fast and cost-effective

---

## ุงูุชุฑุฎูุต / License

MIT

## ุงููุณุงููุฉ / Contributing

<div dir="rtl">

- ุญุงูุธ ุนูู ุงูุชุบููุฑุงุช ูุฑูุฒุฉ ูุขููุฉ ุงูููุน
- ุฃุถู ุงุฎุชุจุงุฑุงุช ููุณููู ุงูุฌุฏูุฏ
- ุงุณุชุฎุฏู ุณุฌูุงุช ูุคุฑุฎุฉ ูุฏููุง (ุจุฏูู ุฑููุฒ ุชุนุจูุฑูุฉ)
- ุงุชุจุน ุงูุฃููุงุท ูู `AGENTS.md` ูุณูุฑ ุนูู ุงูุชุทููุฑ

</div>

- Keep changes focused and typeโsafe
- Include tests for new behavior
- Use timestamped, minimal logs (no emojis)
- Follow the patterns in `AGENTS.md` for development workflow
